fragment CouncilMemberFields on CouncilMember {
  id
  member {
    ...MemberFields
    councilMembers {
      __typename
    }
  }
  unpaidReward
  stake
}

fragment ElectedCouncilsFields on ElectedCouncil {
  id
  electedAtBlock
  councilMembers {
    ...CouncilMemberFields
  }
}

fragment ElectionCandidateFields on Candidate {
  id
  member {
    ...MemberFields
  }
  stake
  noteMetadata {
    header
    bulletPoints
    bannerImageUri
    description
  }
}

fragment ElectionRoundFields on ElectionRound {
  cycleId
  candidates {
    ...ElectionCandidateFields
  }
}

fragment PastElectionRoundFields on ElectionRound {
  id
  cycleId
  updatedAt
  candidates {
    stake
  }
  castVotes {
    voteForId
  }
}

fragment ElectionCandidateDetailedFields on Candidate {
  ...ElectionCandidateFields
  stakingAccountId
  rewardAccountId
  electionRound {
    cycleId
    isFinished
  }
}

fragment CastVoteFields on CastVote {
  stake
  stakeLocked
  castBy
  voteFor {
    ...MemberFields
  }
  electionRound {
    cycleId
  }
}

query GetElectedCouncils($where: ElectedCouncilWhereInput!) {
  electedCouncils(where: $where) {
    ...ElectedCouncilsFields
  }
}

query GetCurrentElection {
  electionRounds(where: { isFinished_eq: false }, orderBy: [cycleId_DESC], limit: 1) {
    ...ElectionRoundFields
  }
}

query GetPastElections($offset: Int, $limit: Int, $orderBy: [ElectionRoundOrderByInput!]) {
  electionRounds(where: { isFinished_eq: true }, offset: $offset, limit: $limit, orderBy: $orderBy) {
    ...PastElectionRoundFields
  }
}

query GetPastElectionsCount {
  electionRoundsConnection(where: { isFinished_eq: true }) {
    totalCount
  }
}

query GetPastElection($id: ID!) {
  electionRoundByUniqueInput(where: { id: $id }) {
    ...PastElectionRoundFields
  }
}

query GetCandidate($where: CandidateWhereUniqueInput!) {
  candidateByUniqueInput(where: $where) {
    ...ElectionCandidateDetailedFields
  }
}

query GetElectionCandidatesIds($electionCycleId: Int!) {
  candidates(where: { electionRound: { cycleId_eq: $electionCycleId } }) {
    id
  }
}

query GetCandidateStats($memberId: ID) {
  candidacyWithdrawEventsConnection(where: { member: { id_eq: $memberId } }) {
    totalCount
  }
  councilMembersConnection(where: { member: { id_eq: $memberId } }) {
    totalCount
  }
  candidatesConnection(where: { member: { id_eq: $memberId } }) {
    totalCount
  }
}

query GetCouncilVotes($where: CastVoteWhereInput, $orderBy: [CastVoteOrderByInput!]) {
  castVotes(where: $where, orderBy: $orderBy) {
    ...CastVoteFields
  }
}

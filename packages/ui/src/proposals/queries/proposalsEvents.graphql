fragment ProposalCreatedEventFields on ProposalCreatedEvent {
  id
  createdAt
  proposal {
    id
    title
    creator {
      id
      handle
    }
  }
}

fragment ProposalStatusUpdatedEventFields on ProposalStatusUpdatedEvent {
  id
  createdAt
  proposal {
    id
    title
  }
  newStatus {
    __typename
  }
}

fragment ProposalDecisionMadeEventFields on ProposalDecisionMadeEvent {
  id
  createdAt
  proposal {
    id
    title
  }
}

query GetProposalsEvents {
  events (
    where: {
      type_in: [
        ProposalCreatedEvent,
        ProposalStatusUpdatedEvent,
        ProposalDecisionMadeEvent,
      ]
    }
    orderBy: [createdAt_DESC]
  ) {
    ...on ProposalCreatedEvent {
      ...ProposalCreatedEventFields
    }
    ...on ProposalStatusUpdatedEvent {
      ...ProposalStatusUpdatedEventFields
    }
    ...on ProposalDecisionMadeEvent {
      ...ProposalDecisionMadeEventFields
    }
  }
}

fragment WorkingGroupMetdataFields on WorkingGroupMetadata {
  about
  description
  status
  statusMessage
}

fragment WorkerFields on Worker {
  membership {
    ...MemberFields
  }
  group {
    id,
    name
  }
  status {
    __typename
  }
  isLead
  rewardPerBlock
  stake
}

fragment WorkingGroupFields on WorkingGroup {
  id
  name
  budget
  metadata {
    ...WorkingGroupMetdataFields
  }
  workers {
    ...WorkerFields
  }
  leader {
    membership {
      id
    }
  }
}

query getWorkingGroups {
  workingGroups {
    ...WorkingGroupFields,
  }
}

query getWorkers ($where: WorkerWhereInput) {
  workers(where: $where) {
    ...WorkerFields
  }
}

fragment WorkingGroupOpeningMetadataFields on WorkingGroupOpeningMetadata {
  applicationDetails
  shortDescription
  description
  hiringLimit
  expectedEnding
}

fragment WorkingGroupOpeningFields on WorkingGroupOpening {
  id
  groupId
  group {
    name
    budget
    leaderId
  }
  type
  stakeAmount
  rewardPerBlock
  createdAtBlock {
    ...BlockFields
  }
  metadata {
    ... WorkingGroupOpeningMetadataFields
  }
  applications {
    id
    status {
      __typename
    }
    applicant {
      id
      isVerified
      handle
      rootAccount
      controllerAccount
      inviteCount
      isFoundingMember
      roles {
        id
      }
      metadata {
        name
      }
    }
    status {
      __typename
    }
  }
  status {
    __typename
  }
}

fragment WorkingGroupOpeningFieldsConnection on WorkingGroupOpeningConnection {
  totalCount
  edges {
    node {
      ... WorkingGroupOpeningFields
    }
    cursor
  }
  pageInfo {
    hasNextPage
    hasPreviousPage
    startCursor
    endCursor
  }
}

query getWorkingGroupOpeningsConnection($groupId_eq: ID, $first: Int, $last: Int) {
  workingGroupOpeningsConnection(where: { groupId_eq: $groupId_eq }, first: $first, last: $last) {
    ... WorkingGroupOpeningFieldsConnection
  }
}

query getWorkingGroupOpenings($groupId_eq: ID) {
  workingGroupOpenings(where: { groupId_eq: $groupId_eq }) {
    ... WorkingGroupOpeningFields
  }
}

query getWorkingGroupOpening($where: WorkingGroupOpeningWhereUniqueInput!) {
  workingGroupOpeningByUniqueInput(where: $where) {
    ... WorkingGroupOpeningFields
  }
}

fragment ApplicationQuestionFields on ApplicationFormQuestion {
  index
  type
  question
}

query GetWorkingGroupOpeningQuestions($id: ID!) {
  workingGroupOpeningByUniqueInput(where: {id: $id}) {
    metadata {
      applicationFormQuestions {
        ...ApplicationQuestionFields
      }
    }
  }
}

query GetWorkingGroup($where: WorkingGroupWhereUniqueInput!) {
  workingGroupByUniqueInput(where: $where) {
    ... WorkingGroupFields
  }
}

fragment WorkingGroupApplicationFields on WorkingGroupApplication {
  id
  opening {
    group {
      name
    }
    type
    rewardPerBlock
  }
  applicant {
    ...MemberFields
  }
  status {
    __typename
  }
  stakingAccount
  createdAtBlock {
    ...BlockFields
  }
}

query GetWorkingGroupApplications($applicantId_in: [ID!]) {
  workingGroupApplications(where: { applicantId_in: $applicantId_in }) {
    ...WorkingGroupApplicationFields
  }
}

fragment ApplicationFormQuestionAnswerFields on ApplicationFormQuestionAnswer {
  question {
    ... ApplicationQuestionFields
  }
  answer
}

query GetApplicationFormQuestionAnswer($applicationId_eq: ID) {
  applicationFormQuestionAnswers(where: { applicationId_eq: $applicationId_eq }) {
    ...ApplicationFormQuestionAnswerFields
  }
}

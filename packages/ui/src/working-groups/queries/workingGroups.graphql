fragment WorkingGroupStatusFields on WorkingGroupStatus {
  name
  about
  description
  message
}

fragment WorkerFields on Worker {
  membership {
    ...MemberFields
  }
  group {
    id
  }
}

fragment WorkingGroupFields on WorkingGroup {
  id
  name
  status { ...WorkingGroupStatusFields }
  workers {
    ...WorkerFields
  }
  leader {
    membership {
      id
    }
  }
}

query getWorkingGroups {
  workingGroups {
    ...WorkingGroupFields,
  }
}

query getWorkers ($group_eq: ID) {
  workers(where: {group_eq: $group_eq}) {
    ...WorkerFields
  }
}

fragment WorkingGroupOpeningMetadataFields on WorkingGroupOpeningMetadata {
  applicationDetails
  shortDescription
  hiringLimit
  expectedEnding
}

fragment WorkingGroupOpeningFields on WorkingGroupOpening {
  id
  type
  stakeAmount
  rewardPerBlock
  metadata {
    ... WorkingGroupOpeningMetadataFields
  }
  applications {
    id
    status {
      __typename
    }
  }
}

query getWorkingGroupOpenings($groupId: ID) {
  workingGroupOpenings(where: {group_eq: $groupId}) {
    ... WorkingGroupOpeningFields
  }
}

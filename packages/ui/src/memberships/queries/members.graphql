fragment MemberFields on Membership {
  id
  rootAccount
  controllerAccount
  handle
  name
  about
  avatarUri
  isVerified
  isFoundingMember
  inviteCount
}

query GetMembers($rootAccount_in: [String!], $controllerAccount_in: [String!], $orderBy: MembershipOrderByInput) {
  memberships(
    where: { rootAccount_in: $rootAccount_in, controllerAccount_in: $controllerAccount_in }
    orderBy: $orderBy
  ) {
    ...MemberFields
  }
}

fragment MemberWithDetails on Membership {
  ...MemberFields
  registeredAtTime
  registeredAtBlock {
    ...BlockFields
  }
  invitees {
    ...MemberFields
  }
}

query GetMember($id: ID!) {
  membership(where: { id: $id }) {
    ...MemberWithDetails
  }
}

query SearchMembers($text: String!, $limit: Int) {
  memberships(where: { name_contains: $text, handle_contains: $text }, limit: $limit) {
    ...MemberFields
  }
}
